<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ì•ˆì „ì§€ëŒ€ V5.1</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: sans-serif; -webkit-tap-highlight-color: transparent; user-select: none; }
        body { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e22ce 100%); color: white; height: 100vh; overflow: hidden; font-weight: 900; }
        .screen { display: none; height: 100vh; width: 100%; flex-direction: column; align-items: center; justify-content: center; padding: 20px; text-align: center; position: absolute; }
        .active { display: flex; }

        /* ë©”ì¸ SOS ë²„íŠ¼ */
        .btn-wrap { position: relative; width: 350px; height: 350px; display: flex; align-items: center; justify-content: center; }
        .emergency-btn { width: 280px; height: 280px; border-radius: 50%; background: linear-gradient(135deg, #ff0844 0%, #ff4757 100%); border: none; color: white; font-size: 56px; cursor: pointer; z-index: 10; box-shadow: 0 20px 60px rgba(255, 8, 68, 0.4); }
        .ring { position: absolute; border-radius: 50%; border: 8px solid transparent; }
        .ring1 { width: 330px; height: 330px; border-top-color: rgba(255, 215, 0, 0.8); animation: rot 3s linear infinite; }
        .ring2 { width: 350px; height: 350px; border-bottom-color: rgba(255, 255, 255, 0.4); animation: rot-rev 4s linear infinite; }
        @keyframes rot { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes rot-rev { from { transform: rotate(360deg); } to { transform: rotate(0deg); } }

        /* ì„¤ì • & ë„ì›€ë§ UI */
        .gear { position: absolute; top: 30px; right: 30px; font-size: 40px; cursor: pointer; background: rgba(255,255,255,0.1); padding: 10px; border-radius: 50%; z-index: 20; border: 1px solid rgba(255,255,255,0.2); }
        .card { background: rgba(255,255,255,0.1); padding: 30px; border-radius: 24px; width: 100%; margin-bottom: 15px; backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.2); }
        .id-val { font-size: 52px; color: #ffd700; margin: 15px 0; font-family: monospace; }
        .btn-ui { width: 100%; padding: 22px; font-size: 26px; border-radius: 20px; border: none; cursor: pointer; margin-top: 10px; font-weight: 800; }
        .btn-help { background: #ffd700; color: #1e3c72; }
        .btn-back { background: rgba(255,255,255,0.2); color: white; margin-top: 20px; }

        /* ë¸”ë™ì•„ì›ƒ */
        #blackout { background: #000; z-index: 1000; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="mainScreen" class="screen active">
        <div class="gear" onclick="go('setScreen')">âš™ï¸</div>
        <div class="btn-wrap">
            <div class="ring ring1"></div>
            <div class="ring ring2"></div>
            <button class="emergency-btn" id="sosBtn">ê¸´ê¸‰êµ¬ì¡°</button>
        </div>
    </div>

    <div id="setScreen" class="screen" style="justify-content: flex-start; overflow-y: auto;">
        <h1 style="margin: 50px 0 20px;">ì„¤ì •</h1>
        <div class="card"><div style="font-size: 22px; opacity: 0.8;">ë‚´ ì•ˆì „ ID</div><div class="id-val">SZ-7A3F</div></div>
        <div class="card" style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 26px;">ğŸ”Š ê¸´ê¸‰ êµ¬ì¡°ìŒ</span>
            <input type="checkbox" id="snd" checked style="width: 40px; height: 40px;">
        </div>
        <button class="btn-ui btn-help" onclick="go('helpScreen')">â“ ë„ì›€ë§ ë³´ê¸°</button>
        <button class="btn-ui btn-back" onclick="go('mainScreen')">ëŒì•„ê°€ê¸°</button>
    </div>

    <div id="helpScreen" class="screen">
        <h1 style="margin-bottom: 20px;">ë„ì›€ë§</h1>
        <div class="card" style="text-align: left; font-size: 20px; line-height: 1.6;">
            <p><strong>ğŸ“¢ ì•ˆì‹¬ ëª¨ë“œ</strong>: ì†Œë¦¬ë¡œ ì•Œë¦¼</p>
            <p><strong>ğŸ¤« ë¹„ë°€ ëª¨ë“œ</strong>: í™”ë©´ ì•”ì „ + ì§„ë™</p>
            <p><strong>ğŸ‘† 2ì´ˆ ê¾¹ ëˆ„ë¥´ê¸°</strong>: ì‹¤ìˆ˜ ë°©ì§€ìš©</p>
        </div>
        <button class="btn-ui btn-back" onclick="go('setScreen')">í™•ì¸</button>
    </div>

    <div id="blackout" class="screen" onclick="handleTap()">
        <div style="color:rgba(255,255,255,0.05)">3ë²ˆ íƒ­í•˜ë©´ í•´ì œ</div>
    </div>

    <script>
        // í™”ë©´ ì „í™˜ í•¨ìˆ˜
        function go(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        let timer;
        let isHolding = false;
        const btn = document.getElementById('sosBtn');

        // ê¾¹ ëˆ„ë¥´ê¸° ë¡œì§ (í•µì‹¬ ìˆ˜ì •)
        function startTimer(e) {
            e.preventDefault();
            if (isHolding) return;
            isHolding = true;
            navigator.vibrate(100); // ì‹œì‘ ì‹ í˜¸

            timer = setTimeout(() => {
                // 2ì´ˆê°€ ì§€ë‚¬ì„ ë•Œë§Œ ì‹¤í–‰
                navigator.vibrate([200, 100, 200, 100, 200]);
                if(document.getElementById('snd').checked) {
                    const ut = new SpeechSynthesisUtterance('êµ¬ì¡° ì‹ í˜¸ê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤');
                    ut.lang = 'ko-KR'; 
                    window.speechSynthesis.speak(ut);
                    alert('ğŸš¨ êµ¬ì¡° ìš”ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
                } else {
                    go('blackout');
                }
                isHolding = false;
            }, 2000);
        }

        function cancelTimer() {
            clearTimeout(timer);
            isHolding = false;
        }

        // ë§ˆìš°ìŠ¤ì™€ í„°ì¹˜ ëª¨ë‘ ëŒ€ì‘
        btn.onpointerdown = startTimer;
        btn.onpointerup = cancelTimer;
        btn.onpointerleave = cancelTimer;

        // ë¸”ë™ì•„ì›ƒ í•´ì œ (3ë²ˆ íƒ­)
        let tapCount = 0;
        let tapTimer;
        function handleTap() {
            tapCount++;
            clearTimeout(tapTimer);
            tapTimer = setTimeout(() => { tapCount = 0; }, 1000);
            if(tapCount >= 3) { go('mainScreen'); tapCount = 0; }
        }
    </script>
</body>
</html>
