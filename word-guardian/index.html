<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ë§ë‘ë§ë‘ ê±´ê°• ëŒ€ì‹œ - ìŠ¤ë¥´ì‚¬ë§ˆ</title>
<link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
<style>
    /* ì „ì²´ ë°°ê²½ì„ ì¡°ê¸ˆ ë” ë°ê³  ëª…ë‘í•œ ë…¸ë€-ì—°ë‘ í†¤ìœ¼ë¡œ ì¡°ì • */
    body { margin: 0; padding: 0; overflow: hidden; background: #fffde7; font-family: 'Jua', sans-serif; touch-action: none; }
    #game-view { position: relative; width: 100vw; height: 100vh; }

    /* ì¤‘ì•™ì˜ ë¯¸ì…˜ ì´ë¯¸ì§€ë¥¼ ë” ê·€ì—½ê²Œ ê°ì‹¸ëŠ” í‹€ */
    #reward-container {
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        width: 280px; height: 280px; border-radius: 40px; overflow: hidden;
        box-shadow: 0 15px 0 #cddc39; z-index: 5;
        background-image: url('https://images.unsplash.com/photo-1511688858151-24056a1ea405?q=80&w=400&auto=format&fit=crop'); 
        background-size: cover; border: 8px solid white;
    }
    .block { background: #dce775; border: 2px solid #fff; transition: 0.5s; }
    .block.broken { transform: scale(0) rotate(180deg); opacity: 0; }

    /* ë¹„ëˆ—ë°©ìš¸ì²˜ëŸ¼ í„°ì§€ëŠ” íš¨ê³¼ */
    .bubble {
        position: absolute; border-radius: 50%; background: rgba(255,255,255,0.6);
        pointer-events: none; animation: float-up 0.8s ease-out forwards;
        border: 2px solid white;
    }
    @keyframes float-up {
        to { transform: translateY(-100px) scale(1.5); opacity: 0; }
    }

    #start-btn { 
        padding: 25px 50px; font-size: 35px; background: #ffeb3b; color: #5d4037; 
        border: none; border-radius: 60px; cursor: pointer; box-shadow: 0 10px 0 #fbc02d; 
    }
</style>
</head>
<body>
<div id="game-view">
    <div id="reward-container"><div id="block-overlay" style="display:grid; grid-template-columns:repeat(5,1fr); grid-template-rows:repeat(5,1fr); height:100%;"></div></div>
    <div id="start-screen" style="position:absolute; inset:0; background:rgba(255,255,255,0.9); display:flex; flex-direction:column; justify-content:center; align-items:center; z-index:1000;">
        <h1 style="color:#fbc02d; font-size: 45px; margin-bottom: 20px;">ğŸŒˆ ë§ë‘ ê±´ê°• íŒ¡íŒ¡</h1>
        <button id="start-btn">ì‹ ë‚˜ê²Œ ì‹œì‘!</button>
    </div>
</div>

<script>
    const view = document.getElementById('game-view');
    const overlay = document.getElementById('block-overlay');
    const startBtn = document.getElementById('start-btn');
    
    let active = false, blocks = [];

    // ë¹„ëˆ—ë°©ìš¸ íš¨ê³¼ ì¶”ê°€
    function createBubbles(x, y) {
        for (let i = 0; i < 5; i++) {
            const b = document.createElement('div');
            b.className = 'bubble';
            const size = Math.random() * 20 + 10;
            b.style.width = b.style.height = size + 'px';
            b.style.left = x + (Math.random() - 0.5) * 50 + 'px';
            b.style.top = y + (Math.random() - 0.5) * 50 + 'px';
            view.appendChild(b);
            setTimeout(() => b.remove(), 800);
        }
    }

    // ì†Œë¦¬(ë°œìŒ) ì¬ìƒ
    function speak(text) {
        if ('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'en-US'; msg.rate = 1.0; 
            window.speechSynthesis.speak(msg);
        }
    }

    startBtn.onclick = () => {
        document.getElementById('start-screen').style.display = 'none';
        overlay.innerHTML = '';
        for (let i = 0; i < 25; i++) {
            const blk = document.createElement('div');
            blk.className = 'block';
            overlay.appendChild(blk);
            blocks.push(blk);
        }
        active = true;
        spawn();
    };

    function spawn() {
        if (!active) return;
        const data = { en: 'Carrot', img: 'https://cdn-icons-png.flaticon.com/512/2909/2909770.png' };
        const unit = document.createElement('div');
        unit.style.position = 'absolute';
        unit.innerHTML = `<img src="${data.img}" style="width:100px;"><div style="text-align:center; font-size:20px;">${data.en}</div>`;
        unit.style.left = Math.random() * (window.innerWidth - 100) + 'px';
        unit.style.top = '-150px';
        view.appendChild(unit);

        let y = -150;
        function fall() {
            if (!active || unit.dataset.hit) return;
            y += 3; unit.style.top = y + 'px';
            if (y > window.innerHeight) unit.remove();
            else requestAnimationFrame(fall);
        }

        unit.onpointerdown = (e) => {
            unit.dataset.hit = "true";
            speak(data.en);
            createBubbles(e.clientX, e.clientY);
            if (navigator.vibrate) navigator.vibrate(40);
            
            const alive = blocks.filter(b => !b.classList.contains('broken'));
            if (alive.length > 0) alive[0].classList.add('broken');
            
            unit.style.display = 'none';
            unit.remove();
        };
        requestAnimationFrame(fall);
        setTimeout(spawn, 1500);
    }
</script>
</body>
</html>
