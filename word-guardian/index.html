<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ë§ë‘ ê±´ê°• íŒ¡íŒ¡ - ìŠ¤ë¥´ì‚¬ë§ˆ</title>
<link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.0/kakao.min.js" integrity="sha384-l68Y96fS9q+Tpd67K6S7h7+tX+2U5/Y5vI8l+T+8K5+6k" crossorigin="anonymous"></script>
<style>
    body { margin: 0; padding: 0; overflow: hidden; background: #fffde7; font-family: 'Jua', sans-serif; touch-action: none; }
    #game-view { position: relative; width: 100vw; height: 100vh; }

    /* ì¹´ì¹´ì˜¤ ê³µìœ  ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    #kakao-share-btn {
        position: absolute; top: 80px; left: 50%; transform: translateX(-50%);
        background: #fee500; color: #3c1e1e; padding: 10px 20px;
        border-radius: 20px; font-size: 16px; border: none; cursor: pointer;
        box-shadow: 0 4px 0 #e6cf00; z-index: 200; display: flex; align-items: center; gap: 5px;
    }

    #reward-container {
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        width: 280px; height: 280px; border-radius: 40px; overflow: hidden;
        box-shadow: 0 15px 0 #cddc39; z-index: 5;
        background-image: url('https://images.unsplash.com/photo-1511688858151-24056a1ea405?q=80&w=400&auto=format&fit=crop'); 
        background-size: cover; border: 8px solid white;
    }
    .block { background: #dce775; border: 2px solid #fff; transition: 0.5s; }
    .block.broken { transform: scale(0) rotate(180deg); opacity: 0; }

    #start-btn { 
        padding: 25px 50px; font-size: 35px; background: #ffeb3b; color: #5d4037; 
        border: none; border-radius: 60px; cursor: pointer; box-shadow: 0 10px 0 #fbc02d; 
    }
</style>
</head>
<body>
<div id="game-view">
    <button id="kakao-share-btn" onclick="shareToKakao()">
        <img src="https://developers.kakao.com/assets/img/about/logos/kakaotalksharing/kakaotalk_sharing_btn_small.png" width="20"> 
        í…ŒìŠ¤íŠ¸ ì£¼ì†Œ ë³´ë‚´ê¸°
    </button>

    <div id="reward-container"><div id="block-overlay" style="display:grid; grid-template-columns:repeat(5,1fr); grid-template-rows:repeat(5,1fr); height:100%;"></div></div>
    <div id="start-screen" style="position:absolute; inset:0; background:rgba(255,255,255,0.9); display:flex; flex-direction:column; justify-content:center; align-items:center; z-index:1000;">
        <h1 style="color:#fbc02d; font-size: 45px; margin-bottom: 20px;">ğŸŒˆ ë§ë‘ ê±´ê°• íŒ¡íŒ¡</h1>
        <button id="start-btn">ì‹ ë‚˜ê²Œ ì‹œì‘!</button>
    </div>
</div>

<script>
    // 2. ì¹´ì¹´ì˜¤ ì´ˆê¸°í™” (ìŠ¤ë¥´ì‚¬ë§ˆì˜ í‚¤ë¥¼ ì—¬ê¸°ì— ë„£ìœ¼ì„¸ìš”)
    try {
        Kakao.init('YOUR_JS_KEY_HERE'); 
    } catch(e) { console.log(e); }

    function shareToKakao() {
        Kakao.Share.sendDefault({
            objectType: 'feed',
            content: {
                title: 'ğŸŒˆ ìŠ¤ë¥´ì‚¬ë§ˆì˜ ê±´ê°• íŒ¡íŒ¡ í…ŒìŠ¤íŠ¸!',
                description: 'ê±´ê°• ìŒì‹ì„ ë§ì¶°ì„œ ìˆ¨ê²¨ì§„ ê·¸ë¦¼ì„ ì°¾ì•„ë³´ì„¸ìš”. ì˜ì–´ ê³µë¶€ëŠ” ë¤!',
                imageUrl: 'https://cdn-icons-png.flaticon.com/512/2909/2909770.png',
                link: {
                    mobileWebUrl: window.location.href,
                    webUrl: window.location.href,
                },
            },
            buttons: [
                {
                    title: 'ê²Œì„í•˜ëŸ¬ ê°€ê¸°',
                    link: {
                        mobileWebUrl: window.location.href,
                        webUrl: window.location.href,
                    },
                },
            ],
        });
    }

    // (ê¸°ì¡´ ê²Œì„ ë¡œì§ ìƒëµ - ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€)
    const view = document.getElementById('game-view');
    const overlay = document.getElementById('block-overlay');
    const startBtn = document.getElementById('start-btn');
    let active = false, blocks = [];

    startBtn.onclick = () => {
        document.getElementById('start-screen').style.display = 'none';
        overlay.innerHTML = '';
        for (let i = 0; i < 25; i++) {
            const blk = document.createElement('div');
            blk.className = 'block';
            overlay.appendChild(blk);
            blocks.push(blk);
        }
        active = true;
        spawn();
    };

    function spawn() {
        if (!active) return;
        const data = { en: 'Carrot', img: 'https://cdn-icons-png.flaticon.com/512/2909/2909770.png' };
        const unit = document.createElement('div');
        unit.style.position = 'absolute';
        unit.style.zIndex = '50';
        unit.innerHTML = `<img src="${data.img}" style="width:100px;"><div style="text-align:center; font-size:20px;">${data.en}</div>`;
        unit.style.left = Math.random() * (window.innerWidth - 100) + 'px';
        unit.style.top = '-150px';
        view.appendChild(unit);

        let y = -150;
        function fall() {
            if (!active || unit.dataset.hit) return;
            y += 3; unit.style.top = y + 'px';
            if (y > window.innerHeight) unit.remove();
            else requestAnimationFrame(fall);
        }

        unit.onpointerdown = (e) => {
            unit.dataset.hit = "true";
            const alive = blocks.filter(b => !b.classList.contains('broken'));
            if (alive.length > 0) alive[0].classList.add('broken');
            unit.style.display = 'none';
            unit.remove();
        };
        requestAnimationFrame(fall);
        setTimeout(spawn, 1500);
    }
</script>
</body>
</html>
