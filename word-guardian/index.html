<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Health Food Dash PRO</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&family=Jua&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4CAF50;
            --danger: #FF5252;
            --glass: rgba(255, 255, 255, 0.25);
        }

        body { 
            margin: 0; padding: 0; overflow: hidden; 
            background: linear-gradient(180deg, #e8f5e9 0%, #81c784 100%);
            font-family: 'Jua', sans-serif; touch-action: none;
        }

        /* ë°°ê²½ ì¥ì‹ */
        .bg-circle {
            position: absolute; border-radius: 50%; background: var(--glass); z-index: 0;
        }

        #game-view { position: relative; width: 100vw; height: 100vh; z-index: 1; }

        /* ìƒë‹¨ í”„ë¡œí˜ì…”ë„ UI */
        #ui-header { 
            position: absolute; top: 15px; width: 90%; left: 5%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 20px; padding: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            display: flex; flex-direction: column; align-items: center; z-index: 100;
            border: 1px solid rgba(255,255,255,0.3);
        }

        #score-box { font-size: 24px; color: #2e7d32; margin-bottom: 8px; }
        #hp-container { 
            width: 100%; height: 14px; background: #ddd; border-radius: 10px; 
            overflow: hidden; border: 2px solid #fff;
        }
        #hp-bar { width: 100%; height: 100%; background: linear-gradient(90deg, #4caf50, #8bc34a); transition: width 0.3s ease; }

        /* ê²Œì„ ìœ ë‹› ìŠ¤íƒ€ì¼ */
        .unit { 
            position: absolute; display: flex; flex-direction: column; align-items: center; 
            z-index: 50; cursor: pointer; transition: transform 0.1s;
        }
        .unit:active { transform: scale(0.9); }
        
        .unit-img { 
            width: 80px; height: 80px; object-fit: cover; border-radius: 20px;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2));
            border: 3px solid #fff;
        }
        
        .unit-text { 
            background: var(--primary); color: white; padding: 2px 15px; 
            border-radius: 15px; font-size: 18px; margin-top: -10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); font-family: 'Poppins', sans-serif;
        }
        .bad .unit-text { background: var(--danger); }

        /* íš¨ê³¼ ë©”ì‹œì§€ */
        .combo-text {
            position: absolute; color: #ffeb3b; font-size: 40px; font-weight: bold;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.5); pointer-events: none; z-index: 200;
        }

        #start-screen {
            position: absolute; inset: 0; background: rgba(0,0,0,0.7);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 1000; color: white;
        }

        #start-btn { 
            padding: 20px 60px; font-size: 30px; background: #4CAF50;
            color: white; border: none; border-radius: 50px; cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3); font-family: 'Jua';
        }
    </style>
</head>
<body>
<div id="game-view">
    <div id="start-screen">
        <h1 style="font-size: 40px; margin-bottom: 10px;">Health Dash PRO</h1>
        <p style="margin-bottom: 30px;">ë‹¹ê·¼ê³¼ ì±„ì†Œë¥¼ ëˆŒëŸ¬ ê±´ê°•ì„ ì§€í‚¤ì„¸ìš”!</p>
        <button id="start-btn">ê²Œì„ ì‹œì‘</button>
    </div>

    <div id="ui-header">
        <div id="score-box">SCORE: <span id="score-num">0</span> <small id="combo-tag" style="display:none; color:#e91e63;">(COMBO X2)</small></div>
        <div id="hp-container"><div id="hp-bar"></div></div>
        <div id="tip-box" style="font-size:14px; color:#388e3c; margin-top:8px;">ğŸ¥• ë‹¹ê·¼ì€ ë‘í”¼ ê±´ê°•ê³¼ ì‹œë ¥ ë³´í˜¸ì— ìµœê³ ì˜ˆìš”!</div>
    </div>
</div>

<script>
    const view = document.getElementById('game-view');
    const scoreNum = document.getElementById('score-num');
    const hpBar = document.getElementById('hp-bar');
    const startBtn = document.getElementById('start-btn');
    const startScreen = document.getElementById('start-screen');

    let score = 0, active = false, hp = 100, combo = 0;
    let speed = 3.5;

    // ë¬´ë£Œ ê³ í™”ì§ˆ ì´ë¯¸ì§€ ì†ŒìŠ¤ (Unsplash)
    const foodData = [
        { en: 'CARROT', img: 'https://images.unsplash.com/photo-1598170845058-32b9d6a5da37?w=120&h=120&fit=crop', ok: true },
        { en: 'TOMATO', img: 'https://images.unsplash.com/photo-1518977676601-b53f02ac6d31?w=120&h=120&fit=crop', ok: true },
        { en: 'WALNUT', img: 'https://images.unsplash.com/photo-153662094842d-54ca0d97652c?w=120&h=120&fit=crop', ok: true },
        { en: 'CANDY', img: 'https://images.unsplash.com/photo-1582058091505-f87a2e55a40f?w=120&h=120&fit=crop', ok: false },
        { en: 'BURGER', img: 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=120&h=120&fit=crop', ok: false },
        { en: 'SODA', img: 'https://images.unsplash.com/photo-1622483767028-3f66f32aef97?w=120&h=120&fit=crop', ok: false }
    ];

    function speak(text) {
        if ('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'en-US';
            window.speechSynthesis.speak(msg);
        }
    }

    function spawn() {
        if (!active) return;
        const data = foodData[Math.floor(Math.random() * foodData.length)];
        const unit = document.createElement('div');
        unit.className = `unit ${data.ok ? 'good' : 'bad'}`;
        unit.innerHTML = `<img src="${data.img}" class="unit-img"><div class="unit-text">${data.en}</div>`;
        unit.style.left = (Math.random() * (window.innerWidth - 100)) + 'px';
        unit.style.top = '-150px';
        view.appendChild(unit);

        let y = -150;
        function fall() {
            if (!active) { unit.remove(); return; }
            y += speed; unit.style.top = y + 'px';
            if (y > window.innerHeight) {
                if (data.ok) { hp -= 15; combo = 0; }
                updateUI(); unit.remove();
            } else { requestAnimationFrame(fall); }
        }

        unit.onclick = (e) => {
            e.stopPropagation();
            speak(data.en);
            if (data.ok) {
                combo++;
                score += (100 * (combo > 5 ? 2 : 1));
                hp = Math.min(100, hp + 2);
                speed += 0.03;
                showEffect(e.clientX, e.clientY, combo > 5 ? `COMBO ${combo}!` : '+100');
            } else {
                hp -= 20; combo = 0;
                if (navigator.vibrate) navigator.vibrate(100);
            }
            updateUI();
            unit.remove();
        };
        requestAnimationFrame(fall);
        setTimeout(spawn, Math.max(400, 1200 - (score / 100)));
    }

    function showEffect(x, y, text) {
        const el = document.createElement('div');
        el.className = 'combo-text';
        el.style.left = x + 'px'; el.style.top = y + 'px';
        el.innerText = text;
        view.appendChild(el);
        setTimeout(() => el.remove(), 800);
    }

    function updateUI() {
        scoreNum.innerText = score;
        hpBar.style.width = hp + "%";
        document.getElementById('combo-tag').style.display = combo > 5 ? 'inline' : 'none';
        if (hp <= 0) end();
    }

    function end() {
        active = false;
        alert(`ê²Œì„ ì¢…ë£Œ!\nìµœì¢… ì ìˆ˜: ${score}\në¦¬ì•„ê°€ ìŠ¤ë¥´ì‚¬ë§ˆì˜ ê±´ê°•í•œ ìƒí™œì„ ì‘ì›í•©ë‹ˆë‹¤!`);
        location.reload();
    }

    startBtn.onclick = () => {
        startScreen.style.display = 'none';
        active = true; spawn();
        speak("Let's Start!");
    };
</script>
</body>
</html>
